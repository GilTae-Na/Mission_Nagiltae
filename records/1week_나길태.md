# 1Week 나길태
미션 요구사항 분석 & 체크리스트
요구사항: 호감목록 페이지에서 특정 항목에서 삭제버튼을 누르면, 해당 항목은 삭제되어야 한다. 
- [√] 삭제를 처리하기 전에 해당 항목에 대한 소유권이 본인(로그인한 사람)에게 있는지 체크
- [√] 삭제 후 다시 호감목록 페이지로 돌아와야 한다(rq.redirectWithMsg 함수 사용)
- [√] 예를들어 5번 삭제버튼을 눌렀을 경우에 실행되어야 하는 SQL( DELETE FROM likeable_person WHERE id = 5;)
N주차 미션 요약
[접근 방법]
점프 투 스프링 실습과정에서 배운 삭제 과정을 도입하기로 함
먼저 전체 코드 대충 훑어보고 실행시켜서 동작하는 구조 확인(java코드와 db확인)

인스타 아이디 입력했을때 '좋아요' 관계에 어느 db에 저장되는지 확인 
-> Likable_person에 저장됨
-> html 파일 확인후 url 코드 끝쪽에 delete/3 이라고 되있음 
-> DB에서 3번 튜플인것 확인 
-> 3번 튜플에 5번(나의 인스타 아이디), 6번(좋아하는 인스타 아이디)이 저장되있구나 이거만 지우면 되겠네?
-> Likable_person에서 findById로 게시물 찾아와서(service), controller로 토스 
-> controller에서 optional null인지 확인하고 rq에서 유저이름과 principal 유저이름 같은지 확인(불일치시 알림창)
-> 조건 만족하면 delete 메소드 실행
-> sql쿼리문 충족을 위해 deleteById 사용
-> @Transactional 붙여서 delete문 동작하도록 확인
[특이사항]
sevice에서 delete메소드에 @Transactional 이거 한줄 안써서 2시간을 날렸습니다. 사용할때와 개념파악이 부족한 느낌입니다.

참고: [Refactoring]
Refactoring 시 주로 다루어야 할 이슈들에 대해 리스팅합니다.
1차 리팩토링은 기능 개발을 종료한 후, 스스로 코드를 다시 천천히 읽어보면서 진행합니다.
2차 리팩토링은 피어리뷰를 통해 전달받은 다양한 의견과 피드백을 조율하여 진행합니다. 
